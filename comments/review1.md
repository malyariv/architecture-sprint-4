## Задание 1
> "В целом, доменные области выделены правильно, а проблемы в первую очередь связаны с отсутствием наблюдаемости и медленной работой, что решается добавлением кеша и выделением отдельного микросервиса для расчета стоимости изделий с помощью MES." - все таки немного перемешаны - и расчет и продажи и пр.

Переделал желаемую [архитектуру](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=scheme.drawio#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%D0%A1%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0%20%E2%80%94%201%22%20id%3D%22hX0lVQUU8qIKosX6-Pz2%22%3E7V1Zd6M4Fv41PmfmITns2I%2BOnXT3nKqZdLlmuvsRg2JThZEbcJb69aMVhFiMWWwnRXLqVBBoQbr67nevrsREX%2Bxef4mc%2FfYz9EAw0RTvdaIvJxr6mSroP5zyRlNUW7VoyibyPZaWJaz8H4Alsoybg%2B%2BBOPdgAmGQ%2BPt8ogvDELhJLs2JIviSf%2BwJBvla984GFBJWrhMUU%2F%2FwvWRLU6eanaX%2FCvzNltesWjN6Z%2Bfwh9mbxFvHgy9Ckn4%2F0RcRhAn9a%2Fe6AAHuPd4vNN9Dxd20YREIk5IMcP0N9wd6InBcsEXvDSKpy4x%2FOzv2mpOlMpmrMMYZFk7gHgIngRF%2F7uvbnj23gGHi%2BCHIbgF3G8IAbtgALyaazu8tQexG%2Fj7xYUhv3gilo0FFbYt8F6D%2F4RMe1y35M%2FJ46YGzRuJE26dZAXrLuydUP%2B7L5I0NkPX3AfIbNzERnzl6QLX2r9lN9NeG%2FU9KWWcJJusFzeQ3UQ%2Bu5QwojdacT%2Fb85zTJpIWRrkKFkVbQlKyHULq5FMoU8%2FOmRXWVnNoLal0vsFJc1LYoVwoawnsL%2F5blNfPjmuu3sj6SX1MTZHgWgE%2F%2B8u%2F9D%2BPuk7ey519%2B8%2F%2B%2BUdO5kcp89qJaBA%2BhB3B%2BFRX3svUTsNojAUcJLwiCUNo22QXsNm4PgxQVXxOBunPc7xtSzIK9eQhDgJ%2F2g2CRdob%2B8GChH1aKkP5EflC6E%2FgbLNgumoBIZFFC5PLaFHQZJxH8DoScyr29nC%2FRnR1InHvPT1gzI4CGzFmTV8QZ99APEzJXTSxXyi3u5IVC%2FmH5WZDEsjS7mKjiK15CPrEszTbLilRL6pbTtJLE0iJL6lakRprLVFaeQZSA10rME6XlFwBRz0Zoniksg6kz8GXoZHN99JJhuWawtK2I4xy1HYaZm7TsDGLRH0xE%2BSUD3RYA%2FBuWoRDg51dbuG%2BBvP87ANyZmoLzrMgEZdfbCIBvcSUq%2FzfGhSquExK19R2jMPn7A0Gx5ewwNoTreM%2FrGnH5NFzWanEZsRsiqbvXDWaCt65x%2BwLWd5iAgSiVXe04Zq8pwH9a84QM8ZWjEF6AXFWdzhfLIrhr%2BlxbzmpzCHc0Cb9FvaKdoiEk4C8Aff%2Fw3Tcoy7qqD5DW8iCtWU1B2uoM0gVaXSr6vJ5nJzhwwkw5fTYBgIfsBnYJo2QLNzB0gvssVRLk7JlPEOE9FYhvIEnemGQ5hwTmpwatE1dU39OoXfAQuaDmjRhHT5xoA5Ka50yzfOgigCi8%2F5xvyAnDcJpy%2FHy%2FaqEQvwDHZSowQbliphIrtOA%2Bgs%2FI1MSigCfrk0MMEzQE%2BL1iPI%2BZQsR2CyRXexBhKymmdcRbbGwiVekTK4qYNDzDqEJHFcpn3ahCRxXauwqV7BxVVa5NhxrvXGOaDTWmXj5Q51WY%2F2Gqqag1H1E2jG0VWvArMv%2FizPRDuhDLEIy%2BUx23c8ID0ozJISJPfQMvIAreJpzAvWcV9060l0t%2BLqK9RCpY1F41bjfPibfpLC7TXZJmUab6AwLXMg%2BapavmokZdlOjQPZF4rU9dchWOs6F0yTSvSmZl1phSpkmmZ3aZLQ5xgmo4HeRy04QSdfCK3W8OlmkqL7cjon18RLPOhWjWwjJsuwzRjCX%2BHRHtjIimmdeKaPPH31DKIR4xbcS0tphmj5j2E2KaoV8rptHVTIVA28ku3NU%2B8sPNHY6RqYspyXy3ovM1pjUjQd4hY9XCjinc%2BThD7DxTT%2B8TjHYOA01nDQ%2BJYPs%2BRXCH60xpJoHRPXp3bMe%2FeygdI1TaQuy0FmLPF6GSemDHCJV3G6EyUyVyerURKosvn1sgeC4q5cgSXAmHfQEI6ZQ1XQMhUJDWp0QQyaP2gGRzD8PYX%2FuBn7x9AI47Lrb1gtKzWpQeF9vGxbaWkC3Hq5S5EwZaamuB2MMx7xK4%2FlngeeTNbRBZVWoheSTOI3FuT5zta%2BXNzAGyvGuBwo8wTjYRWP3%2BqRKFf0XV47X4nUPW6stdGnQFH%2FUN6prMo4GzOaFHfCTpor%2FoKvkYYD1y6e7IXb8ph5Np9y3wEYRHOoZICpdalTe5LwpdB%2B2tOG9jbB%2FZMLlrmHkgVhvz4e5I3Cz0DI3%2FBWLPUP9Fb3%2Fi%2FLeGpfOEv1DCjXKrKGnK8pXVQa%2FexKtHEPmoS7BcCuPVSzwbV59HA9rUivHvGtHWcOz0S4xdj%2F087dh7LOsjBpuaWZdumOZl0HFl2bJBmEeR8yY8xkCsuiJdqkg3pH3JxzLwlmVSQNuQyUTaLR3E5CLhpdkUF6c3RuLLzm2t4dTuKpvdZrZ1YVQ2zWl%2B2GazaZuBi1E%2FJ3N81gCmEQHeLeLy5Ac%2FGABT1Ibjq9sdB7gdZKizPAJMj0GGnME27S6QcZp99q80iHmVwAgvC6%2Fe4gTsiuYaTV%2B5cA%2FusBw6bBagh%2Bb7feC7TmaWreBT8uIUijuHLSWYKCWlIqaX3DDSi4sNwFNSYVMULbISu%2BdUO619k5hpJ3Z1rfF23Ko5ZSFXdjgdsWnSaBo15z0i5pBoslQtBFhW%2BekD9OeoVcStGtKV%2Bh1m%2BKjPgjlLXsMkgbu0FGL4yy1Cr%2BaHm68EV5UsYcJcYPgFH50Eh5ihJNSTilHi%2FoKJk4juLwE6IzRHnXATAAFP70L4ic2Q1PJ7dDyP1quQFwvgy5wf7IJT2MkvQi3gdY%2FdGvQCVXOIYgR2XwAzSckjqI0sR2rKgej%2BGVCLjtS0jmFwSMA8c%2F2VGX2jA6%2Bl4WgqEk8smo1qmpi3G7vHMDWkKLORVUqRhQ1Yh2EMYvIYUsibZTezePoyMdJznEZh4KvrTbwHSkdh6GRjpK8zjhnf7tBgzLRhhuw0Wq57KAExJbLRMEbMHB%2FU1mIdW79ZOzHwioUUVlLwfVJbvmp8AkCydYhbnhyLswbkT3aMmXc%2BYj%2BuaF%2FbuohWv6N%2FXNEeCXGXFe1rW0jR3r%2BXNeesS43vzFPX9ypLU5Xb9diAVp46S3LV21YnV%2F2JcREoX4uNbvRoA6KaWTgD26%2BxIPohfPKjHY2H4EcVYOcBPvk1mvAzRrMddu9Zbb8T9XzBvXDa2TbDjUcWXNNmuPPthWuoN6eX0Js9qjGtl4Wkgv6RI6lV%2FbwuHYsFF1z4XL%2FzLyBqTd031kDBHy3O%2F1O8dQv7%2F4QIyprdoOyIPxomSY8D3JGlguJRgCyiEg1egmgGTmD7SOlLfLgtpGN0ZXea0myrUkl0pWoe9yuM0ZXvObpSl0%2F2U64s0D3D4i9EJ8Aw3vr7SrB9CJCWY7uF8oD7D4aTeH9%2BAv85qTlUrmtsw2mlMNltCLSVUFGGtyceH1ofhQ1Cj5OIdQDd71%2B3fjipdDEqxVlrKPg3naT8eyfUB%2BMJTKQwiaca%2FsXPBWvSAB5wUJzXqCTeBIOTHDHh22G353zLiVyewp6wCvh1nJ815U2Vk1C5VXHMReWs68iCCyRYZsGUzhVYcLEg61hJFXw6K4k%2FCJ%2BeYnAi5%2B60S%2BYziGNnQ%2FjS7wdwaLPU88VZr%2F3k8%2B%2BV2LMChJrtsqo4yQvBi0T13K0T0mfoWSIZnVuD5AWAcCLsdmR5tg5ZMAJI%2BMmpSwnc%2B%2B54%2BvNI80qiMU%2BneZ6PI6aoMCNEwCg0Ur%2BPTP1kt5Y1Ox%2Fza%2BY%2FMdWr8J8IMd3Cvhq6SKTPZpPLRl0YRkNfizGMk20qBVebsnT0tFNkKsXzmTS8tpKtHHn%2BXEHfiFYgYDq47T531%2BmjS5gt0JCSwz6ADuYmJPRkRz%2BjiIthG3fJ1l5yDweu8paOnOKn5xS5WMt3c8rNwtZx9G%2F1J%2Fd6OeXmJzjNRuJeCvnph37IazNG2araZb8oYV6CbLT3JnR1E0h6PN1neaqboDCys2EIgcxfeYOr2qXb8vPqSc%2Fz9xh0o6kxvQrK2yc%2FbRrX3zlGqVMotzErdHz8HSTuFsSlA8D2EYmdVlAI8raone95dHxqgxxlZWPVIW5%2Be9Ik9faJQ1UjaZX4fKPcqjOdVdIWWrq4%2B048i0yk2cOeBhwBF6C%2BwOyaBnopGxCSoDGPOPlSvg1Sxo2DvSf5I4I35FuschQZasEP%2BUn2ydQP9LXUMRi8FRev9%2B%2BNX64WWfEYDH5aMLhxxmXfhs4%2F7SqYEHj1kz%2BFv6nbj8Ri4svM6Ycv3oSLyx%2FjMJDDr%2BA4NuWdkk0thUJJdsMFxZOPjNBkZ6BVbysUMvCWnfwqg1oLpnEVc6ShaItno0wEL3p6bxgP%2BvAnUFWIhCptfzDlM5QazxNTKskYyMeumnZ5k8%2FiNKcRjO24O6pZr2XtcxJVKR5DWQitzLHuVc3nlnMPLvhOzZjyd%2FJdZ%2FI43Qwy8vafnLfnvnE%2BbuIceXufX2KeNXabn423X%2BRQk97Z9ZkOPyuoYFvSwCoOOeiHNcwGYw1GRZurmyblsM0zsGXrSixKToPTC9GmvP7TAa2mMySn%2BHoMOClI21BWo8obJ9d0Fjq8cNxtqzhV4PnVgSHjbqQxpOSidDi35e%2BqdyPl%2FNxjSOoZQlIVRQbcq3NLW1YJiTht2mozNG3JDJJmn%2BAAqZhzElvJC%2FeRqYH3HS2FIG%2B%2BOn0TRBN2lCa9cYM3rvcUYyyp6rJlhmnJcJotgnyajZ9dRgJ7Gj%2BmsT%2FG2OlXOHZl%2B%2Bn7mnuEvSyr%2BcE7Gz7ZUYCGz7j08JmF4RM2RhVNsWy%2FYWbXCJ0q7dNj63TKrUL2%2BQlrdTZfu2u%2BWJfZaLeKpkl2mj3wgsVxC6zpSYsU7IoyIoiAWSYC%2FWw8nMquDF2RRKupK2MmY5EmBycOfJKHXdT6Vy%2B6yu3MNvOia1rasKJ7XCIrgvzOI5GGzC9tmTa2DXItljS0RNrddaFdoQv%2FiJA2w6O5RYK62TZViVjLTVpGRJYp0PwsEY2wWT86UpMByig7ErHsaCcZfvrTkRc5yilDoDSw5S%2Fh1sWCXIZfk1fbRrmruhQvbw0U5o4qkkDrSNx6IYN1jsB1%2B%2FLLPp2P2zweoi6epDPcms%2FUarvkY5zNNy7XxNvcUsjQZYQDr4XH8Y6yz2Sron7%2Ffw%3D%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E)

Выделил новые сервисы **Constructor** и **Cost calculator** для генерации и загрузки эскизов, а также расчета стоимости заказов. 
Они взаимодействуют ассинхронно через **RabitMQ**. Пользователь загржает/создает эскиз и сохраняет в хранилище, 
далее отправляется сообщение в **RabbitMQ**, **Constructor** читает сообщение, делает расчет и результат сохраняется в **MesDB**,
также в **RabbitMQ** отправляется сообщение о готовности расчета, которое может прочитать **CRM API**, чтобы потом менеджер оформил заказ.

## Задание 2
> Я бы добавил еще метрики на RabbitMQ

Можно добавить слежующие метрики:
- Queue Messages - количество сообщений, ожидающих обработки в очереди.
- Message Rate - скорость поступления и обработки сообщений (messages/sec).
- Queue Size - Текущий размер очереди в байтах.
- Memory Used -  Количество используемой памяти нодой.
- Disk Space Used - Количество используемого дискового пространства.
- CPU Usage - Загрузка процессора ноды.
- Number of Channels - Текущее количество открытых каналов.
- Channel Message Rate - Скорость поступления и обработки сообщений через каналы.
- Exchange Messages - Количество сообщений, проходящих через обменники.
- Exchange Message Rate - Скорость поступления и обработки сообщений через обменники.
- Number of Consumers - Текущее количество активных потребителей.
- Consumer Message Rate - Скорость обработки сообщений потребителями.
- Number of Connections - Текущее количество активных соединений.
- Connection Message Rate - Скорость обработки сообщений через соединения.
- Total Messages - Общее количество сообщений в системе.
- Total Message Rate -  Общая скорость поступления и обработки сообщений в системе.

## Задание 5
> Я бы предложил, Read и Write Through, потому что перезагрузка кэша раз в 5 минут с одной стороны рабочий вариант, но с другой стороны можно и пропустить заказы

Соглашусь на *Write Through*, тогда обновление состояния происходит при записи новых данных.

