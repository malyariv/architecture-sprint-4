## Задание 3. Трейсинг
- **Проанализируйте систему компании и C4-диаграмму в контексте планирования трейсинга.** Напишите и выделите на схеме системы, которые следует покрыть трейсингом. Для этого идентифицируйте места, где заказ может «сломаться» или зависнуть. Составьте список данных, которые должны попадать в трейсинг

  Предлагается покрыть трейсингом все сервисы API, потому что заказ может потеряться на этапе отправки из Shop API или CRM API в хранилище файлов, при отправке из MES API в MES и обратно, при отправке в Message Queue. В контекст наряду с `trace_id` и `span_id`,  могут входить `request_id` для  идемпотентности, `user_id`, чтобы ограничивать количество запросов от одного пользователя, время первого запроса

- **Добавьте в файл раздел «Мотивация».** Напишите здесь, почему в систему нужно добавить трейсинг и что это даст компании. Опишите возможные три-пять технические и бизнес-метрики решения, на которые повлияет внедрение трейсинга.

  Трейсинг позволит найти узкие места и заиспользовать паттерны типа Retry, Timeout, Rate Limiter. Также он позволит снизить количество ошибок при общении микросервисов.

- **Добавьте раздел «Предлагаемое решение».** Опишите, как и с помощью каких технологий будет реализован трейсинг, какие компоненты нужно внедрить или доработать. Отразите компоненты и новые связи на схеме. Скачайте диаграмму
  контейнеров "Александрита" в модели C4. Доработайте диаграмму, исходя из вашего решения: отразите на ней
  новые компоненты и связи. Новые элементы выделяйте красным цветом — так ревьюеру будет проще проверить вашу работу.
  Когда схема будет готова, добавьте ссылку на неё в раздел «Предлагаемое решение».

  Для трейсинга предполагается использовать Jaeger, соответсвтенно на схеме должна появится [коллектор Jaeger и сервис Jaeger-UI](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=jewerly_c4_model_2.drawio#R%3Cmxfile%3E%3Cdiagram%20name%3D%22Page-1%22%20id%3D%22q5gKrhV2WKv8pvfnoQvh%22%3E7V1Zc%2BM2Ev41qtp9sIuHeOjRluxJUuOMM5rsZh8hCpLooQiGhCw7v34BEOABnpKoy%2BZMZSI2CYAEml9%2F3WiAA328fvsSgmD1hObQG2jK%2FG2gTwaaphqWTf5HJe9cotpcsgzdOZelgqn7D%2BRChUs37hxGuQsxQh52g7zQQb4PHZyTgTBE2%2FxlC%2BTlWw3AEhYEUwd4Rel%2F3TlexVJbs1L5L9BdrkTLqjmKz6yBuJg%2FSbQCc7TNiPSHgT4OEcLxr%2FXbGHq090S%2FxOUeK84mNxZCH5cUQLMX2h%2FkCg84cEWeG4ZSlw1%2FB2v%2BmE8PUyK5e%2F5VnPrxHvBTY%2BRj4PowTE5BZ%2BUjDy35mI4Hmi7OTWDkhG6AXeTHJ29otVHkLv2I%2FEIhuwvyw6f%2FBDAEGFGBSeogQ67f0%2BunKzpsmuK5EX0AtMiUzF04Bp6z8QCG9OogdB0oLscrKArFt%2BaBGVFNdkukEo%2F02P2CPBgdF%2FzOB9v8e4PEiZuIqeIduUA1g7f0JPm15P9ntcxSgcF7VDPESTIaM7kAkcUt58Vz9zURGXFlbAxIZewuYkna9URuTDJ1ZsuLWwvrGtm1F9S6XuC1OOTewlwtZLgeTPq3rKyRV5hcv5X1kfyYWuZ9MGeTBXy7nzy9LK1v1t3DeGv%2FfqMm71ny%2FqQPqoVo488hLa%2BS6rYrF8NpQF4WItgSOCOyFV57%2FDS9Hw5PKj1mCnUPnJ9LVs2YP7mPfEivdj1vnHSGrul32mTEa8nIF%2BwPkQOPvCFE5pCXmagsEYSOaI1qe4RD9BNmSioP1uRuQs6sIQYPcxfz2wwhGTIwY49ICwbI9TF77w2qV8ot7eSxwv6j%2BjNmwjKZVRSq9EjUkBeWySyjrEq1pG1ZppUIS6ssaVuRbtKYJLqSBUsOgq8wxPAtI%2BLa8gUi0rMhec8UftbQOZBz2LNH%2FHib2gVtyGWrrE0QFgBw%2FF0mdadwTX5wFRWHHMD3APNfqQ75EMdQGuwB6f%2FZQNqZmkLLTNkLyo9XIYQvUSXc%2FxnRShUH%2BMwE%2FqQozH5zKKZ1bAIPgTn5odN%2F1jFnoCe2KPxJ32hfnINEr9EHAXATrCmi%2BLMoEG31aL4bmuu1aE74FdPv9duSctFbZ3i7hbN7SgFhmGi81oz0s9gsfJ0JQWonlEbgLwA1Ybx340mNSagukTmjSaiftUbaLnZFMhcF89A96HcN5bKF6wLatTy0a2ZbaDdPDO2Mp%2B8M598hcDiAY1Iq4oBegeFBiF6J08WQmCjNAjBajRF7TMrk64j8mHk61fy9h%2FIeygmUD3so76H8KFAusXRVsU6H5YUgTanuJwGhVOHhfAmn%2FBCFeIWWyAfeQyqVFDe95isiBD9WgBeI8TvXJLAheJ17FSr7NkKb0IE192vwsBsIlxA3vdOUtOciasWRCqEHsPuaD7Dt0Om7Wcxv3DYVzeYzKUbBrcIM%2FiDeSxKzEm5J7KKMmXPjb4hpxJuQXfUCtzD03gdicK%2FZxl2J%2BXLYn7OYL6PWfNVEjeYgWiVvcZnxkkyLYuuPBF3LAkCmrhrjGntRYkQDpvFal8bkIuI%2BxzImdt6WjMrcAqXMlNgndgvGmwiTFnYHudxrEjN1%2BEajR4DqdKwvtz2ifXxEM0%2BFaObYHFpWGaINJ%2FRvj2gnRDTNuFREY1ORyibqMa3HtH0xzeox7RNimqVcKqbFk3F7ZllMg9D1l%2Fc0XaQu1yIN3majr1HcMlHktZxDEUIHEmc8StBWWUKfuszkBaDO70BM2LFjNi1HtB9KtUTgNQ4YL1C4Bhx6wQxtcMaDXoRoTe88IasMjAPSgzQakFZ4%2FdjcZ2zsi9l2LWb3GRtZXO4zNuoNw0iV2K5dYhkuImNj%2FP1pD5OQy9JomNQrIcVbSJBOmcWzKgwKkvaUEFGIfyS6GSA%2Fcmeu5%2BL3D0Ca%2B%2Bm7TlB6VIvS%2FfRdP323J2TL03fJ8cVlYjDIPh6XL8Hrz4LPPXHeB5JVpRaTe%2BbcM%2Bf2MKwmAROOWMOLpc48qDK53wOHn1GElyGc%2FvG1Eod%2FIc3T2MgasPn%2F8gAHT1zeuqRr0vgGLQb8OYu7ZBe%2FfLA4R0%2BnD8fu%2BnUqgk87755LQDzUKUjGgKlVRai7YtF14L4X7W2N7j0hZmeHyvmCGO3y2cj4nyGfjXRp%2BP4XLX%2Brjkwh%2BB89e6sothBM3ngT8dF79ugZhi7pEaqW9cPVmCInAk2NOXIqr%2FHoSXIth04%2F79Blh42%2BYScdNPtKx2z4icdMbzlm9mUNmXlmhLRMK4eQ%2BwwafHMxr83gh0ld5HdaFT14zxzIFUVk9PAdXZtPeYFH15Q4QvzoeocnLLdGY%2B2ytMQ6s5aYak5LbhRiSIf7qMrxR%2Fg6B9g%2B8wAbB4PA%2FkM2bGttTzRku0UZfkvS%2B6cYhTTVYfoeYbguBh1i%2BdRBAbynQwf4XZCL7oLAcx2QBhemaIG3oFDdKSICGUe7pFbinOAb7rrRaj24wBWecTGuUOK97xpt2P%2BWeIAi29W1IYhm37x%2BrisfV5UDpw2eeZJnRg%2FSKChz6rOOd9WMlsn%2BFL3v%2BE%2Bjby98c9aV%2Bj11SkmfeXdcPEMYo3VSCwtfyXdEHs31lz8YFCmpYMBDufQBnwGmyZdEROCP2RM5jIswwNkwbgZzQvKOAn%2FpwQwQ3fvoK39DkvjFM5jP43YV9mAe2t6J3X%2BohG8PlGkFvgU0OBcfkGY2YUTQ5DvkgRV2CblHXiIJSMDw4RXGcQnW0ixC3gbDuzSEXRa66APROWTdYT5Qjn7oRiH6oSZbLOXCH4ppnCb%2BkZjAi3DItBN7ZNaF2fWWY3bmmNVZnehR2yFTLmvMPnOwymw5ZvplDRlXtVfgbaBgtKcfw5b%2BKPTn4iLOb4iEnz9s9LS2a6i7f%2BVYUfJY4D1zAScoac3PVJCa3ZGVN7umLW1GKF2vJguJyguQH%2FEtpKqUPMvhzlmSlB4xzUIh3dOx4Jg1Z%2BXoNzMQsTR3qZLCrDA9z1rLN023SMErwKYY2a5XM8h%2B8l0K56dz7%2Fr8nEub49Xq14z3%2BTm9W7TDkicJbkvXPJ11Ulg785THWcla6%2FC0cRHW3pS1yTzIeLdUkLPMdlSOacdDUGRUUh8naR2iilipeKkaqiVXZMkVxVpXqGhnClhxw8dVCrvgL8SLD6OUZpUoDQ8HZge6YMTk6Obanc9jnaq1UuWAXavRBRhPdifnrQyyG4CXwfuNcqtbIjeD97%2BYyzpQD8XMuKhVVbR8FWixiCCWhrpTuj4l5fZY1h9v5MSINk%2B0zOwpSzp44YbrOFNTbMxEA8J0y%2FdwIDYET%2FcTuGYSfiVk%2B4wr%2F%2FX6ZPh%2Bg6YTk%2BETLf0vzVI%2F0tL%2FdgZN%2F9RzA2LxViMRHnVNwjqZ9I8%2FijGfFU1VlysLavZM4PvpxssH4r1312zysbjvLl9pEGGAiZFjdCnebSF%2BiNxGC9du%2F%2FpVB90YSa3WSNasOlCN5hhVv%2BrgqlcdiCzjZBvd1luinyrCpJ9nOpBnwYrfmfjSTkmwnUaqYu0W36dSY24Zf2yqw%2BmvXLZSMbPHbk0VjND98eX%2B5vHbty%2Bze9X5a6H%2F3TpkpmtdU4WKGS1d3khaHR0n0KLq0tcHknetcratUEK8dKXBmZLyityiRnN9NeqxWPZoaJn5J62ITXUTGEhZ1Xc2ZMiPVm5QSZsePaKhfEV8njr9izMeuh8VRv8e1GzFfGje4261cCvUkjJVGv0y5rSjxa%2Ffdj8DADMPOT9%2FrFx%2FUDnxpBTt71Chf0sBKYUStcwc2xr9S6%2FzZuwGRLiuaKFJTeIWhgLFsoKXzToQRgCEjpDwK8yCEWg2GpWo1ghC%2FIVTblVdmKsy%2B3kgVslokEDXrrHl5LsnlTVVYF5a0yFhxMP24wDOap9Z%2F%2B9w7lZ%2Fz6p30non7WROWiUvugYf7fExk4ve%2B2itfLSSmaKClan20RRVZnFnzQIo017jrC4aobRmzk0zR%2Fb1OGrJoo%2FUS1PyXlrqyuXZVSk5OSCToXvnqqi6w9HtSMrX78i%2FskdWrq2RNawlQfL1qmLs4lxZlnI7zE%2ByjkyiLvYo%2FXNC7yolSD%2FCeGkOs3EeKVj2TZxGuvQbgMv0bIEvYdKImKTv2cunZy%2F1X5Xo2csnZi%2BqKCM%2Bp3xx5EWk86S5SFl0Oy2naR17bbb63VtzVUoV0%2BW9ONvGH1RVmtC35bHuKuYqN6Q3hVyr7qyzdLgyDSyunvkQGiiF%2BZsMR4eaKm8vu3cWpqpLoTLbOpKmyrfcuBRHV2sLHHcpzhOMIrBkoa0%2FNnCzV0AOzGYufvqjkmNOIYuirdOmRDzOh1spKuesgB9fE38HI428zSDeQugPMvvq8jIrwBbzQGLf2BeDMApcp%2Be0n5HTVu4pszennbt0S4NYlwnYUKbTZ1JcNs89MJNiKBkK9dJ4rtjf7iJoRma3Is1OdnGMQ25quovZLkG3i%2BbOcgqruTcjkWs6Gncu3LLWwEgaChyHO4tdSS9DqzsNSZ8mivwhCL8qZbrYsmt6pNVSo4Z3Qr7erltyVxZjLm3t1CHlOBh88%2Bc%2B38CopPc90f6ERLsUwetXzF%2FoV4YeHxU6D1sdYe6%2FMnT%2B4PPQrGBdJ%2FjMUEv6cp7188kev6NRnqcM471h99%2Fot4KItKcQjSnER6IQ%2BkjSFXVfhi5r3bGWbqtDKQRoGw0MXS5gdb3Yu1TFi4u9z6HzHWqgWrYZXqNpO9v6tun3hyJxa1iFff3s7EqI14lWT1ercSXx6nD1dEKW%2BtXT%2B62ePowGydsIGaMSGnSk9dPkMKQfQMyYFDqOT2hOkeXh%2Fw%3D%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E).

- **Добавьте раздел «Компромиссы».**

  Могут возникнуть сложности для трейсинга MES API, так как это стороннее решение.

- **Проработайте аспекты безопасности.** Опишите, какие меры для предотвращения несанкционированного доступа будут предусмотрены для системы трейсинга внутри компании и снаружи если это требуется.

  Внедрение аутентификации — зайти в систему смогут только сотрудники компании с актуальной учетной записью и ролью “Поддержка”».
